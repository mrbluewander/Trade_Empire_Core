<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>Trade Empire Core - çµ±å¸¥æŒ‡æ®ä¸­å¿ƒ</title>
    <style>
        body { background-color: #1a1a2e; color: #e94560; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; border: 2px solid #0f3460; padding: 20px; border-radius: 15px; background: #16213e; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        h1 { text-align: center; color: #4ecca3; text-transform: uppercase; letter-spacing: 3px; }
        .status-panel { display: flex; justify-content: space-between; padding: 10px; background: #0f3460; border-radius: 8px; margin-bottom: 20px; }
        .api-input-group { background: #1a1a2e; padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        input { width: 70%; padding: 10px; border-radius: 5px; border: 1px solid #4ecca3; background: #16213e; color: white; }
        button { padding: 10px 20px; background: #e94560; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        button:hover { background: #d03d54; }
        #log-output { background: #000; color: #00ff00; padding: 15px; height: 300px; overflow-y: auto; font-family: 'Courier New', Courier, monospace; border-radius: 5px; border: 1px solid #333; }
        .btn-group { display: flex; gap: 10px; margin-bottom: 10px; }
        .success { color: #4ecca3; }
        .error { color: #ff4d4d; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ›ï¸ Trade Empire Core ğŸ›ï¸</h1>
        <div class="status-panel">
            <span>ç³»çµ±ç‹€æ…‹: <span id="sys-status">âšª å¾…å‘½</span></span>
            <span>ç‰ˆæœ¬: v1.0.0 (é§­å®¢é‡æ§‹ç‰ˆ)</span>
        </div>

        <div class="api-input-group">
            <input type="password" id="api-key" placeholder="è²¼ä¸Šæ‚¨çš„ Gemini API Key...">
            <button onclick="saveKey()">è¨­å®š API Key</button>
            <p id="key-status" style="font-size: 0.8em; margin-top: 10px;"></p>
        </div>

        <div class="btn-group">
            <button style="background: #4ecca3;" onclick="pingGemini()">âš¡ æ¸¬è©¦é€£ç·š (Ping)</button>
            <button style="background: #3944f7;" onclick="alert('æœ¬åœ°ä»£ç†é€£ç·šé–‹ç™¼ä¸­...')">ğŸ“Š è®€å–å°æŒ‡æœŸæ—¥èªŒ</button>
        </div>

        <div id="log-output">ç³»çµ±åˆå§‹åŒ–å®Œæˆã€‚ç­‰å¾…çµ±å¸¥æŒ‡ä»¤...</div>
    </div>

    <script>
        let apiKey = localStorage.getItem('gemini_key') || '';
        if(apiKey) document.getElementById('key-status').innerText = "âœ… Key å·²å¾æœ¬åœ°è¼‰å…¥";

        function log(msg, type='') {
            const output = document.getElementById('log-output');
            const time = new Date().toLocaleTimeString();
            const color = type === 'error' ? '#ff4d4d' : (type === 'success' ? '#4ecca3' : '#00ff00');
            output.innerHTML += `<div>[${time}] <span style="color:${color}">${msg}</span></div>`;
            output.scrollTop = output.scrollHeight;
        }

        function saveKey() {
            const val = document.getElementById('api-key').value;
            if(val) {
                localStorage.setItem('gemini_key', val);
                apiKey = val;
                log("API Key è¨­å®šæˆåŠŸã€‚", "success");
            }
        }

        async function pingGemini() {
            if(!apiKey) return log("éŒ¯èª¤: è«‹å…ˆè¨­å®š API Key", "error");
            log("æ­£åœ¨ç©¿é€é€£ç·šè‡³ Google Gemini v1 ç©©å®šé€šé“...");
            
            // é§­å®¢æ€ç¶­ï¼šä½¿ç”¨æœ€ç©©å®šçš„ v1 ç«¯é»èˆ‡æ¨™æº– JSON æ ¼å¼
            const url = `https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=${apiKey}`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: "ping" }] }] })
                });

                const data = await response.json();
                if (response.ok) {
                    log("ğŸŸ¢ é€£ç·šæˆåŠŸï¼å¤§è…¦å·²å°±ç·’ã€‚çµ±å¸¥ï¼Œè«‹ä¸‹ä»¤ã€‚", "success");
                    document.getElementById('sys-status').innerText = "ğŸŸ¢ åœ¨ç·š";
                } else {
                    log(`ğŸ”´ é€£ç·šå¤±æ•—: ${data.error.message}`, "error");
                }
            } catch (err) {
                log(`ğŸ”´ ç¶²çµ¡æ””æˆªæˆ–éŒ¯èª¤: ${err}`, "error");
            }
        }
    </script>
</body>
</html>
