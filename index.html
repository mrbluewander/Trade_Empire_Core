<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>Trade Empire Core - æœ€çµ‚çªç ´ç‰ˆ</title>
    <script type="importmap">
      {
        "imports": {
          "@google/generative-ai": "https://esm.run/@google/generative-ai"
        }
      }
    </script>
    <style>
        body { background-color: #0d1117; color: #58a6ff; font-family: monospace; padding: 20px; }
        .box { max-width: 800px; margin: 0 auto; border: 1px solid #30363d; padding: 20px; border-radius: 10px; background: #161b22; }
        #log { background: #000; color: #39ff14; padding: 15px; height: 350px; overflow-y: auto; margin-top: 20px; border: 1px solid #333; font-size: 1.1em; }
        input { width: 75%; padding: 12px; background: #0d1117; border: 1px solid #30363d; color: #fff; border-radius: 5px; }
        button { padding: 12px 24px; background: #238636; color: white; border: none; cursor: pointer; font-weight: bold; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="box">
        <h2 style="color:#79c0ff">ğŸ›ï¸ çµ±å¸¥æŒ‡æ®ä¸­å¿ƒ (å®˜æ–¹ SDK çªç ´ç‰ˆ)</h2>
        <input type="password" id="key" placeholder="è²¼ä¸Šæ–° Key (AIza...w8PE)">
        <button onclick="connect()">âš¡ å®˜æ–¹è·¯å¾‘é»ç«</button>
        <div id="log">>> ç­‰å¾…çµ±å¸¥æˆæ¬Š...</div>
    </div>

    <script type="module">
        import { GoogleGenerativeAI } from "@google/generative-ai";

        window.connect = async function() {
            const key = document.getElementById('key').value.trim();
            const logBox = document.getElementById('log');
            const log = (m, c) => logBox.innerHTML += `<div style="color:${c}">[${new Date().toLocaleTimeString()}] ${m}</div>`;

            if(!key) return alert("è«‹è¼¸å…¥ Key");
            
            logBox.innerHTML = ""; // æ¸…ç©ºèˆŠæ—¥èªŒ
            log("ğŸ“¡ å•Ÿå‹• Google å®˜æ–¹ SDK é€šè¨Šæ¨¡çµ„...", "#79c0ff");

            try {
                // ä½¿ç”¨å®˜æ–¹ SDK å»ºç«‹é€£ç·š
                const genAI = new GoogleGenerativeAI(key);
                const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });
                
                log("ğŸ§  æ­£åœ¨èˆ‡ Gemini 1.5 Flash é€²è¡Œç¥ç¶“å…ƒæ¡æ‰‹...", "#79c0ff");
                
                // åŸ·è¡ŒçœŸæ­£çš„ç”Ÿæˆæ¸¬è©¦
                const result = await model.generateContent("ping");
                const response = await result.response;
                const text = response.text();
                
                if(text) {
                    log("ğŸŸ¢ ã€é€£ç·šæˆåŠŸã€‘å¤§è…¦å·²å°±ç·’ï¼ç³»çµ±é€²å…¥ 100% é‹ä½œç‹€æ…‹ã€‚", "#39ff14");
                    log(`AI å›æ‡‰: ${text}`, "#39ff14");
                }
            } catch (err) {
                log(`ğŸ”´ çªç ´å¤±æ•—: ${err.message}`, "#ff7b72");
                log("ğŸ’¡ åµéŒ¯ç­†è¨˜ï¼šå¦‚æœéŒ¯èª¤æ˜¯ 'API key not valid'ï¼Œè«‹ç¢ºèªæ˜¯å¦è²¼éŒ¯èˆŠ Keyã€‚", "#8b949e");
            }
        }
    </script>
</body>
</html>
